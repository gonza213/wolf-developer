import{_ as p,r as c,o as _,e as d,f as g,F as m,l as t,aD as u,k as r,Q as b,aC as v,bm as w,I as y,H as h,j as f,at as Q}from"./index.59ad9dfc.js";import{Q as U}from"./QPage.12981457.js";import{Q as q,u as x}from"./useUsuarios.7d670da3.js";import{Q as V}from"./QSelect.4f4435df.js";import{Q as k}from"./QForm.1b34bb0b.js";import{u as D}from"./use-quasar.c67abdef.js";import"./QItem.9afaadf2.js";import"./QItemLabel.81acae72.js";import"./QMenu.9759187c.js";import"./selection.2ef39368.js";const E={props:["usuario","uid","editar"],setup(i){const a=c({nombre:"",rol:"",password:""}),l=D(),o=c(!1);return _(async()=>{const{usuario:s}=await i.usuario(i.uid);a.value={nombre:s.nombre,rol:s.rol}}),{onSubmit:async()=>{a.value.password||delete a.value.password;try{o.value=!0;const{msg:s}=await i.editar(i.uid,a.value);s=="ok"&&l.notify({message:"\xA1Usuario actualizado con \xE9xito!",color:"green-10",position:"top-right",icon:"lar la-check-circle"}),o.value=!1}catch(s){l.notify({message:`${s}`,color:"red-10",position:"top-right",icon:"lar la-exclamation-circle"})}},formData:a,visible:o,options:["ADMIN_ROLE","USER_ROLE"]}}},S=r("div",{class:"row justify-center"},null,-1),j={class:"row justify-end"},B={class:"row justify-center"};function N(i,a,l,o,n,s){return d(),g(k,{class:"q-gutter-md q-mt-md",onSubmit:v(o.onSubmit,["prevent"])},{default:m(()=>[t(u,{filled:"",modelValue:o.formData.nombre,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.nombre=e),label:"Nombre completo",color:"indigo-6"},null,8,["modelValue"]),t(u,{filled:"",modelValue:o.formData.password,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.password=e),type:"password",label:"Nueva contrase\xF1a",color:"indigo-6"},null,8,["modelValue"]),t(V,{filled:"",modelValue:o.formData.rol,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.rol=e),options:o.options,label:"Rol",color:"indigo-6"},null,8,["modelValue","options"]),S,r("div",j,[t(b,{type:"submit",color:"indigo-6",label:"Actualizar",class:"self-center q-ma-sm q-py-sm","icon-right":"las la-user"})]),r("div",B,[t(q,{showing:o.visible,label:"Espere un momento...","label-class":"text-indigo-6","label-style":"font-size: 1.1em"},null,8,["showing"])])]),_:1},8,["onSubmit"])}var R=p(E,[["render",N]]);const C={components:{EditarUser:R},setup(){const a=w().params.id,{getUsuario:l,editUsuario:o}=x(),n=c(),s=c();return _(async()=>{const e=await l(a);n.value=e.usuario.img,s.value=e.usuario.nombre}),{img:n,getUsuario:l,editUsuario:o,id:a,nombre:s}}},I={class:"text-h5 text-dark"},z={class:"row justify-center"},L={class:"col-md-4 q-pa-md"},M={class:"justify-center row"},A={key:0,src:"https://cdn.quasar.dev/img/boy-avatar.png",class:"q-pa-sm",style:{width:"200px"}},F=["src"],O={class:"col-md-5 q-pa-md q-mt-md bg-dark"};function P(i,a,l,o,n,s){const e=y("EditarUser");return d(),g(U,{class:"q-pa-md bg-white"},{default:m(()=>[r("span",I,"Editar usuario "+h(o.nombre),1),r("div",z,[r("div",L,[t(Q,null,{default:m(()=>[r("div",M,[o.img?(d(),f("img",{key:1,src:o.img,class:"q-pa-sm",style:{width:"200px"}},null,8,F)):(d(),f("img",A))])]),_:1}),t(u,{type:"file"})]),r("div",O,[t(e,{usuario:o.getUsuario,uid:o.id,editar:o.editUsuario},null,8,["usuario","uid","editar"])])])]),_:1})}var oo=p(C,[["render",P]]);export{oo as default};
