import{Q as w}from"./QInnerLoading.73b346f1.js";import{be as C,r as Q,o as x,b as s,c as i,E as a,j as t,k as o,i as g,aq as r,at as U,Q as n,aC as l,aY as A,G as k,F as c}from"./index.0c61262b.js";import{Q as d,a as F,b as P,A as j}from"./constants.0318d621.js";import{Q as B}from"./QPage.e84e745b.js";import{u as L}from"./use-quasar.73035dae.js";import{u as N}from"./useUsuarios.d07c1aca.js";import{_ as T}from"./EditarFormComponent.93c49edc.js";import"./QMenu.08125cb0.js";import"./selection.03ff6e7c.js";import"./QSelect.fb88fe8b.js";import"./QItem.2fdacce5.js";import"./QItemLabel.34691db2.js";import"./QForm.3a4adf3d.js";const V=t("span",{class:"text-h4 text-indigo-6"},"Mi Perfil",-1),z={class:"row justify-center"},E={class:"col-12 col-md-4 q-ma-md"},S={class:"justify-center row"},$=["loading"],I=["src"],M={class:"row justify-center"},R={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},D=c("Limpiar"),G=c("Remover archivo"),Y={class:"col"},H=t("div",{class:"q-uploader__title"},"Actualizar foto de perfil",-1),J={class:"q-uploader__subtitle"},K=c("Elegir Archivo"),O=c("Subir archivo"),W=c("Abortar"),X={class:"col-12 col-md-6 q-ma-md"},me={__name:"MiPerfilView",setup(Z){const{username:v}=C(),_=v.value.uid,{getUsuario:p,editUsuario:y,loading:f}=N(),m=Q(),b=L();x(async()=>{const u=await p(_);m.value=u.usuario.img,nombre.value=u.usuario.nombre});const q=u=>new Promise(h=>{setTimeout(()=>{h({url:`${j}/api/uploads/usuarios/${_}`,method:"PUT",fieldName:"archivo"}),b.notify({message:"\xA1Foto actualizada con \xE9xito!",color:"green-10",position:"top-right",icon:"lar la-check-circle"})},2e3)});return(u,h)=>(s(),i(B,{class:"q-pa-md bg-white"},{default:a(()=>[V,t("div",z,[t("div",E,[o(U,{class:"q-mb-md"},{default:a(()=>[t("div",S,[m.value?(s(),g("img",{key:1,src:m.value,class:"q-pa-sm",style:{width:"200px"}},null,8,I)):(s(),g("img",{key:0,src:"https://cdn.quasar.dev/img/boy-avatar.png",class:"q-pa-sm",style:{width:"200px"},loading:r(f)},null,8,$))]),t("div",M,[o(w,{showing:r(f),label:"Espere un momento...","label-class":"text-indigo-6","label-style":"font-size: 1.1em"},null,8,["showing"])])]),_:1}),o(P,{style:{width:"100%"},label:"Cambiar foto",accept:".jpg, image/*",factory:q,color:"indigo-6"},{header:a(e=>[t("div",R,[e.queuedFiles.length>0?(s(),i(n,{key:0,icon:"clear_all",onClick:e.removeQueuedFiles,round:"",dense:"",flat:""},{default:a(()=>[o(d,null,{default:a(()=>[D]),_:1})]),_:2},1032,["onClick"])):l("",!0),e.uploadedFiles.length>0?(s(),i(n,{key:1,icon:"done_all",onClick:e.removeUploadedFiles,round:"",dense:"",flat:""},{default:a(()=>[o(d,null,{default:a(()=>[G]),_:1})]),_:2},1032,["onClick"])):l("",!0),e.isUploading?(s(),i(A,{key:2,class:"q-uploader__spinner"})):l("",!0),t("div",Y,[H,t("div",J,k(e.uploadSizeLabel)+" / "+k(e.uploadProgressLabel),1)]),e.canAddFiles?(s(),i(n,{key:3,type:"a",icon:"add_box",onClick:e.pickFiles,round:"",dense:"",flat:""},{default:a(()=>[o(F),o(d,null,{default:a(()=>[K]),_:1})]),_:2},1032,["onClick"])):l("",!0),e.canUpload?(s(),i(n,{key:4,icon:"las la-upload",onClick:e.upload,round:"",dense:"",color:"dark"},{default:a(()=>[o(d,null,{default:a(()=>[O]),_:1})]),_:2},1032,["onClick"])):l("",!0),e.isUploading?(s(),i(n,{key:5,icon:"clear",onClick:e.abort,round:"",dense:"",flat:""},{default:a(()=>[o(d,null,{default:a(()=>[W]),_:1})]),_:2},1032,["onClick"])):l("",!0)])]),_:1})]),t("div",X,[o(T,{usuario:r(p),uid:r(_),editar:r(y)},null,8,["usuario","uid","editar"])])])]),_:1}))}};export{me as default};
