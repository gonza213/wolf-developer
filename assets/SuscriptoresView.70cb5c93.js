import{Q as b,a as w,b as p,c as f,d as k}from"./QTable.f369ce6f.js";import{Q as v}from"./QInnerLoading.ce64e7ed.js";import{Q}from"./QPage.677f5366.js";import{r as u,aA as _,_ as h,b as m,i as S,k as t,E as a,j as c,aD as x,u as y,F as B,G as q,Q as C,as as F,H as T,c as g,aB as V}from"./index.f1b44a2b.js";import{u as $}from"./use-quasar.a96d14ef.js";import"./QList.8e5b8aec.js";import"./QSelect.a5bd5abf.js";import"./QItem.fa0fb0ff.js";import"./QItemLabel.9731a734.js";import"./QMenu.c42c600d.js";import"./selection.d049ce2b.js";import"./QLinearProgress.830d9759.js";import"./use-fullscreen.9d695368.js";const E=()=>{const o=u(),s=localStorage.getItem("token"),n=async()=>{try{const{data:i}=await _.get("/suscriptores",{headers:{"x-token":s}});o.value=i.suscriptores}catch{}},e=async i=>{const{data:l}=await _.delete(`/suscriptores/${i}`,{headers:{"x-token":s}});return l};return n(),{suscriptores:o,deleteSuscriptor:e}},D=[{name:"email",required:!0,label:"Email",align:"left",field:o=>o.name,format:o=>`${o}`,sortable:!0},{name:"acciones",label:"Acciones",field:"acciones"}],I={name:"ListaSuscriptores",emits:["onFire"],setup(o,s){const n=$(),{suscriptores:e,deleteSuscriptor:i}=E(),l=r=>{n.dialog({title:"\xBFEst\xE1 seguro de borrar el suscriptor?",message:"Si no est\xE1 seguro, presione cancelar.",ok:{color:"indigo-6",label:"Si, borrar"},cancel:{color:"red-6",label:"Cancelar"},persistent:!0}).onOk(async()=>{try{const{msg:d}=await i(r);d=="ok"&&n.notify({message:"\xA1Suscriptor eliminado con \xE9xito!",color:"green-10",position:"top-right",icon:"lar la-check-circle"}),s.emit("onFire",!1)}catch(d){console.log(d)}})};return{filter:u(""),columns:D,suscriptores:e,onDelete:l}}},N={class:"col-12"},L={class:"q-pa-md"};function O(o,s,n,e,i,l){return m(),S("div",N,[t(F,{class:"my-card bg-white"},{default:a(()=>[c("div",L,[t(b,{title:"Lista de Contactos",rows:e.suscriptores,columns:e.columns,"row-key":"name",filter:e.filter},{"top-right":a(()=>[t(x,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":s[0]||(s[0]=r=>e.filter=r),placeholder:"Buscar",color:"indigo-6"},{append:a(()=>[t(y,{name:"search"})]),_:1},8,["modelValue"])]),body:a(r=>[t(w,{props:r},{default:a(()=>[t(p,{key:"email",props:r},{default:a(()=>[B(q(r.row.email),1)]),_:2},1032,["props"]),t(p,{key:"acciones",props:r},{default:a(()=>[t(C,{round:"",color:"red-4",size:"sm",icon:"las la-trash",class:"q-ml-xs",onClick:d=>e.onDelete(r.row._id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])])]),_:1})])}var j=h(I,[["render",O]]);const z={components:{Suscriptores:j},setup(){const o=u(!1),s=u(!0);return{visible:o,showTable:s,onFire:e=>{s.value=e,o.value=!0,setTimeout(()=>{s.value=!0},1e3),setTimeout(()=>{o.value=e},2e3)}}}},A={class:"q-pa-md q-gutter-sm text-indigo-6"},G={class:"row"},H=c("div",{class:"col-12 row q-pa-sm"},[c("div",{class:"col-6 text-indigo-6"},[c("span",{class:"text-h3 text-weight-bold"},"Suscriptores")])],-1),P={class:"row justify-center"};function U(o,s,n,e,i,l){const r=T("Suscriptores");return m(),g(Q,{class:"q-pa-md bg-white"},{default:a(()=>[c("div",A,[t(k,null,{default:a(()=>[t(f,{icon:"home",to:{name:"home"}}),t(f,{label:"Suscriptores",icon:"las la-user-plus"})]),_:1})]),c("div",G,[H,e.showTable?(m(),g(r,{key:0,onOnFire:e.onFire},null,8,["onOnFire"])):V("",!0),c("div",P,[t(v,{showing:e.visible,label:"Espere un momento...","label-class":"text-indigo-6","label-style":"font-size: 1.1em"},null,8,["showing"])])])]),_:1})}var ae=h(z,[["render",U]]);export{ae as default};
