import{Q as y}from"./QInnerLoading.ce64e7ed.js";import{_ as b,bd as U,r as w,o as C,H as q,b as s,c as l,E as e,j as i,k as t,i as h,as as Q,Q as d,aB as r,aX as x,G as k,F as c}from"./index.f1b44a2b.js";import{A,Q as n,a as E,b as F}from"./constants.b80933b4.js";import{Q as P}from"./QPage.677f5366.js";import{u as B}from"./use-quasar.a96d14ef.js";import{u as j}from"./useUsuarios.4fb7e4ab.js";import{E as I}from"./EditarFormComponent.0045535b.js";import"./QMenu.c42c600d.js";import"./selection.d049ce2b.js";import"./QSelect.a5bd5abf.js";import"./QItem.fa0fb0ff.js";import"./QItemLabel.9731a734.js";import"./QForm.293b32f3.js";const L={components:{EditarUser:I},setup(){const{username:u}=U(),{getUsuario:_,editUsuario:p,loading:a}=j(),m=w(),f=B();return C(async()=>{const o=await _(u.value.uid);m.value=o.usuario.img,nombre.value=o.usuario.nombre}),{img:m,getUsuario:_,editUsuario:p,uploadImg:o=>new Promise(v=>{setTimeout(()=>{v({url:`${A}/api/uploads/usuarios/${u.value.uid}`,method:"PUT",fieldName:"archivo"}),f.notify({message:"\xA1Foto actualizada con \xE9xito!",color:"green-10",position:"top-right",icon:"lar la-check-circle"})},2e3)}),loading:a,id:u.value.uid}}},N=i("span",{class:"text-h4 text-indigo-6"},"Mi Perfil",-1),T={class:"row justify-center"},V={class:"col-12 col-md-4 q-ma-md"},z={class:"justify-center row"},S=["loading"],M=["src"],R={class:"row justify-center"},D={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},G=c("Limpiar"),H=c("Remover archivo"),X={class:"col"},J=i("div",{class:"q-uploader__title"},"Actualizar foto de perfil",-1),K={class:"q-uploader__subtitle"},O=c("Elegir Archivo"),W=c("Subir archivo"),Y=c("Abortar"),Z={class:"col-12 col-md-6 q-ma-md"};function $(u,_,p,a,m,f){const g=q("EditarUser");return s(),l(P,{class:"q-pa-md bg-white"},{default:e(()=>[N,i("div",T,[i("div",V,[t(Q,{class:"q-mb-md"},{default:e(()=>[i("div",z,[a.img?(s(),h("img",{key:1,src:a.img,class:"q-pa-sm",style:{width:"200px"}},null,8,M)):(s(),h("img",{key:0,src:"https://cdn.quasar.dev/img/boy-avatar.png",class:"q-pa-sm",style:{width:"200px"},loading:a.loading},null,8,S))]),i("div",R,[t(y,{showing:a.loading,label:"Espere un momento...","label-class":"text-indigo-6","label-style":"font-size: 1.1em"},null,8,["showing"])])]),_:1}),t(F,{style:{width:"100%"},label:"Cambiar foto",accept:".jpg, image/*",factory:a.uploadImg,color:"indigo-6"},{header:e(o=>[i("div",D,[o.queuedFiles.length>0?(s(),l(d,{key:0,icon:"clear_all",onClick:o.removeQueuedFiles,round:"",dense:"",flat:""},{default:e(()=>[t(n,null,{default:e(()=>[G]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.uploadedFiles.length>0?(s(),l(d,{key:1,icon:"done_all",onClick:o.removeUploadedFiles,round:"",dense:"",flat:""},{default:e(()=>[t(n,null,{default:e(()=>[H]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.isUploading?(s(),l(x,{key:2,class:"q-uploader__spinner"})):r("",!0),i("div",X,[J,i("div",K,k(o.uploadSizeLabel)+" / "+k(o.uploadProgressLabel),1)]),o.canAddFiles?(s(),l(d,{key:3,type:"a",icon:"add_box",onClick:o.pickFiles,round:"",dense:"",flat:""},{default:e(()=>[t(E),t(n,null,{default:e(()=>[O]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.canUpload?(s(),l(d,{key:4,icon:"las la-upload",onClick:o.upload,round:"",dense:"",color:"dark"},{default:e(()=>[t(n,null,{default:e(()=>[W]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.isUploading?(s(),l(d,{key:5,icon:"clear",onClick:o.abort,round:"",dense:"",flat:""},{default:e(()=>[t(n,null,{default:e(()=>[Y]),_:1})]),_:2},1032,["onClick"])):r("",!0)])]),_:1},8,["factory"])]),i("div",Z,[t(g,{usuario:a.getUsuario,uid:a.id,editar:a.editUsuario},null,8,["usuario","uid","editar"])])])]),_:1})}var po=b(L,[["render",$]]);export{po as default};
