import{Q as y}from"./QInnerLoading.051e4275.js";import{_ as b,bd as U,r as w,o as C,I as q,e as s,f as l,F as e,k as i,l as t,j as h,at as Q,Q as d,aB as r,aX as x,H as k,G as c}from"./index.a41ae495.js";import{Q as n,a as A,b as F}from"./QUploader.22a9a66b.js";import{Q as E}from"./QPage.1ea919ed.js";import{u as P}from"./use-quasar.1e6fead0.js";import{A as B}from"./constants.9e8d69f8.js";import{u as I}from"./useUsuarios.9df9c5fa.js";import{E as j}from"./EditarFormComponent.dafa8ccf.js";import"./QMenu.43d920a2.js";import"./selection.b7a6f271.js";import"./QSelect.1de7a70a.js";import"./QItem.c2052c42.js";import"./QItemLabel.f8c15c9b.js";import"./QForm.4030cafd.js";const L={components:{EditarUser:j},setup(){const{username:u}=U(),{getUsuario:m,editUsuario:p,loading:a}=I(),_=w(),f=P();return C(async()=>{const o=await m(u.value.uid);_.value=o.usuario.img,nombre.value=o.usuario.nombre}),{img:_,getUsuario:m,editUsuario:p,uploadImg:o=>new Promise(v=>{setTimeout(()=>{v({url:`${B}/api/uploads/usuarios/${u.value.uid}`,method:"PUT",fieldName:"archivo"}),f.notify({message:"\xA1Foto actualizada con \xE9xito!",color:"green-10",position:"top-right",icon:"lar la-check-circle"})},2e3)}),loading:a,id:u.value.uid}}},N=i("span",{class:"text-h4 text-indigo-6"},"Mi Perfil",-1),T={class:"row justify-center"},V={class:"col-12 col-md-4 q-ma-md"},z={class:"justify-center row"},S=["loading"],M=["src"],R={class:"row justify-center"},D={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},G=c("Limpiar"),H=c("Remover archivo"),X={class:"col"},J=i("div",{class:"q-uploader__title"},"Actualizar foto de perfil",-1),K={class:"q-uploader__subtitle"},O=c("Elegir Archivo"),W=c("Subir archivo"),Y=c("Abortar"),Z={class:"col-12 col-md-6 q-ma-md"};function $(u,m,p,a,_,f){const g=q("EditarUser");return s(),l(E,{class:"q-pa-md bg-white"},{default:e(()=>[N,i("div",T,[i("div",V,[t(Q,{class:"q-mb-md"},{default:e(()=>[i("div",z,[a.img?(s(),h("img",{key:1,src:a.img,class:"q-pa-sm",style:{width:"200px"}},null,8,M)):(s(),h("img",{key:0,src:"https://cdn.quasar.dev/img/boy-avatar.png",class:"q-pa-sm",style:{width:"200px"},loading:a.loading},null,8,S))]),i("div",R,[t(y,{showing:a.loading,label:"Espere un momento...","label-class":"text-indigo-6","label-style":"font-size: 1.1em"},null,8,["showing"])])]),_:1}),t(F,{style:{width:"100%"},label:"Cambiar foto",accept:".jpg, image/*",factory:a.uploadImg,color:"indigo-6"},{header:e(o=>[i("div",D,[o.queuedFiles.length>0?(s(),l(d,{key:0,icon:"clear_all",onClick:o.removeQueuedFiles,round:"",dense:"",flat:""},{default:e(()=>[t(n,null,{default:e(()=>[G]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.uploadedFiles.length>0?(s(),l(d,{key:1,icon:"done_all",onClick:o.removeUploadedFiles,round:"",dense:"",flat:""},{default:e(()=>[t(n,null,{default:e(()=>[H]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.isUploading?(s(),l(x,{key:2,class:"q-uploader__spinner"})):r("",!0),i("div",X,[J,i("div",K,k(o.uploadSizeLabel)+" / "+k(o.uploadProgressLabel),1)]),o.canAddFiles?(s(),l(d,{key:3,type:"a",icon:"add_box",onClick:o.pickFiles,round:"",dense:"",flat:""},{default:e(()=>[t(A),t(n,null,{default:e(()=>[O]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.canUpload?(s(),l(d,{key:4,icon:"las la-upload",onClick:o.upload,round:"",dense:"",color:"dark"},{default:e(()=>[t(n,null,{default:e(()=>[W]),_:1})]),_:2},1032,["onClick"])):r("",!0),o.isUploading?(s(),l(d,{key:5,icon:"clear",onClick:o.abort,round:"",dense:"",flat:""},{default:e(()=>[t(n,null,{default:e(()=>[Y]),_:1})]),_:2},1032,["onClick"])):r("",!0)])]),_:1},8,["factory"])]),i("div",Z,[t(g,{usuario:a.getUsuario,uid:a.id,editar:a.editUsuario},null,8,["usuario","uid","editar"])])])]),_:1})}var fo=b(L,[["render",$]]);export{fo as default};
