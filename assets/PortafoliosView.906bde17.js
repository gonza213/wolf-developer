import{Q as z,a as I,b as g,c as q,d as L}from"./QTable.cc6ce3fb.js";import{_ as C,r as f,e as c,f as _,F as t,l as a,as as k,aD as x,j as w,H as p,aB as v,k as l,Q as b,aC as M,bc as U,v as j,G as y,J as V,at as S,I as E,ar as P,aU as O}from"./index.a41ae495.js";import{Q as N}from"./QInnerLoading.051e4275.js";import{Q as R}from"./QPage.1ea919ed.js";import{Q as A}from"./QSelect.1de7a70a.js";import{Q as G}from"./QForm.4030cafd.js";import{u as B}from"./use-quasar.1e6fead0.js";import{c as F,a as D}from"./object.d8999c0c.js";import{u as H,a as T}from"./usePortafolios.5c5f720b.js";import"./QList.58e9fe33.js";import"./QLinearProgress.1d799905.js";import"./use-fullscreen.0a542d73.js";import"./QItem.c2052c42.js";import"./QItemLabel.f8c15c9b.js";import"./QMenu.43d920a2.js";import"./selection.b7a6f271.js";import"./constants.9e8d69f8.js";const J={emits:["onFire"],setup(n,r){const i=B(),o=f({});let s=f({});const u=f(!1),e=F().shape({titulo:D().required("El titulo es obligatorio"),categoria:F().required("La categoria es obligatorio."),descripcion:D().required("La descripci\xF3n es obligatorio")}),{categorias:d}=H(),{postPortafolio:m}=T();return{formData:o,formError:s,loading:u,onSubmit:async()=>{s.value={};try{await e.validate(o.value,{abortEarly:!1});try{o.value.categoria=o.value.categoria.value,u.value=!0;const{msg:h}=await m(o.value);h=="ok"&&(i.notify({message:"\xA1Portafolio cargado con \xE9xito!",color:"green-10",position:"top-right",icon:"lar la-check-circle"}),o.value={}),u.value=!1,r.emit("onFire",!1)}catch(h){console.log(h)}}catch(h){h.inner.forEach(Q=>{s.value[Q.path]=Q.message})}},categorias:d}}},$={key:0,class:"q-mx-lg text-red-6 text-weight-bold"},K={key:1,class:"q-mx-lg text-red-6 text-weight-bold"},W={key:2,class:"q-mx-lg text-red-6 text-weight-bold"},X={class:"row justify-end"};function Y(n,r,i,o,s,u){return c(),_(G,{class:"q-gutter-md",onSubmit:M(o.onSubmit,["prevent"])},{default:t(()=>[a(x,{filled:"",modelValue:o.formData.titulo,"onUpdate:modelValue":r[0]||(r[0]=e=>o.formData.titulo=e),label:"Titulo",color:"indigo-6",class:k({error:o.formError.titulo})},null,8,["modelValue","class"]),o.formError.titulo?(c(),w("span",$,p(o.formError.titulo),1)):v("",!0),a(A,{filled:"",modelValue:o.formData.categoria,"onUpdate:modelValue":r[1]||(r[1]=e=>o.formData.categoria=e),options:o.categorias,label:"Categoria",color:"indigo-6",class:k({error:o.formError.categoria})},null,8,["modelValue","options","class"]),o.formError.categoria?(c(),w("span",K,p(o.formError.categoria),1)):v("",!0),a(x,{filled:"",modelValue:o.formData.descripcion,"onUpdate:modelValue":r[2]||(r[2]=e=>o.formData.descripcion=e),label:"Escribir una descripci\xF3n...",color:"indigo-6",type:"textarea",class:k({error:o.formError.descripcion})},null,8,["modelValue","class"]),o.formError.descripcion?(c(),w("span",W,p(o.formError.descripcion),1)):v("",!0),l("div",X,[a(b,{type:"submit",color:"indigo-6",label:"Cargar",class:"self-center q-ma-sm q-py-sm","icon-right":"las la-cube",loading:o.loading},null,8,["loading"])])]),_:1},8,["onSubmit"])}var Z=C(J,[["render",Y],["__scopeId","data-v-95a8bbb8"]]);const oo=[{name:"titulo",required:!0,label:"Titulo",align:"left",field:n=>n.name,format:n=>`${n}`,sortable:!0},{name:"categoria",align:"left",label:"Categoria",field:"categoria",sortable:!0},{name:"img",label:"Img",align:"left",field:"img",sortable:!0},{name:"enlace",label:"Enlace",align:"left",field:"enlace",sortable:!0},{name:"descripcion",label:"Descripcion",align:"left",field:"descripcion"},{name:"acciones",label:"Acciones",field:"acciones"}],eo={name:"ListaPortafolios",emits:["onFire"],setup(n,r){const i=B(),o=U(),{portafolios:s,deletePortafolio:u}=T(),e=d=>{i.dialog({title:"\xBFEst\xE1 seguro de borrar el portafolio?",message:"Si no est\xE1 seguro, presione cancelar.",ok:{color:"indigo-6",label:"Si, borrar"},cancel:{color:"red-6",label:"Cancelar"},persistent:!0}).onOk(async()=>{try{const{msg:m}=await u(d);m=="ok"&&i.notify({message:"\xA1Portafolio eliminado con \xE9xito!",color:"green-10",position:"top-right",icon:"lar la-check-circle"}),r.emit("onFire",!1)}catch(m){console.log(m)}})};return{filter:f(""),columns:oo,onDelete:e,portafolios:s,onRoute:d=>{o.push(`portafolios/edit/${d}`)}}}},ao={class:"col-12"},ro={class:"q-pa-md"},to=l("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),lo=["src"],io=y("Link");function so(n,r,i,o,s,u){return c(),w("div",ao,[a(S,{class:"my-card bg-white"},{default:t(()=>[l("div",ro,[a(z,{title:"Lista de Contactos",rows:o.portafolios,columns:o.columns,"row-key":"name",filter:o.filter},{"top-right":t(()=>[a(x,{borderless:"",dense:"",debounce:"300",modelValue:o.filter,"onUpdate:modelValue":r[0]||(r[0]=e=>o.filter=e),placeholder:"Buscar",color:"indigo-6"},{append:t(()=>[a(j,{name:"search"})]),_:1},8,["modelValue"])]),body:t(e=>[a(I,{props:e},{default:t(()=>[a(g,{key:"titulo",props:e},{default:t(()=>[y(p(e.row.titulo),1)]),_:2},1032,["props"]),a(g,{key:"categoria",props:e},{default:t(()=>[y(p(e.row.categoria.nombre),1)]),_:2},1032,["props"]),a(g,{key:"img",props:e},{default:t(()=>[e.row.img?(c(),_(V,{key:1},{default:t(()=>[l("img",{src:e.row.img},null,8,lo)]),_:2},1024)):(c(),_(V,{key:0},{default:t(()=>[to]),_:1}))]),_:2},1032,["props"]),a(g,{key:"enlace",props:e},{default:t(()=>[e.row.enlace?(c(),_(b,{key:0,color:"indigo-6",href:e.row.enlace,target:"_blank"},{default:t(()=>[io]),_:2},1032,["href"])):v("",!0)]),_:2},1032,["props"]),a(g,{key:"descripcion",props:e},{default:t(()=>[y(p(e.row.descripcion),1)]),_:2},1032,["props"]),a(g,{key:"acciones",props:e},{default:t(()=>[a(b,{round:"",color:"orange-4",size:"sm",icon:"las la-edit",class:"q-ml-xs",onClick:d=>o.onRoute(e.row._id)},null,8,["onClick"]),a(b,{round:"",color:"red-4",size:"sm",icon:"las la-trash",class:"q-ml-xs",onClick:d=>o.onDelete(e.row._id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])])]),_:1})])}var no=C(eo,[["render",so]]);const co={components:{CargarPortafolio:Z,Portafolios:no},setup(){const n=f(!1),r=f(!0),i=f(!1);return{showModal:n,loading:i,showTable:r,onFire:s=>{r.value=s,i.value=!0,setTimeout(()=>{r.value=!0,i.value=s},1e3)}}}},mo={class:"q-pa-md q-gutter-sm text-indigo-6"},uo={class:"row"},fo={class:"col-12 row q-pa-sm"},go=l("div",{class:"col-6 text-indigo-6"},[l("span",{class:"text-h3 text-weight-bold"},"Portafolios")],-1),_o={class:"col-6 row justify-end"},po={class:"row justify-center"},bo=l("div",{class:"text-h5 col-8"},"Cargar Portafolio",-1),ho={class:"text-h5 col-4 row justify-end"};function vo(n,r,i,o,s,u){const e=E("Portafolios"),d=E("CargarPortafolio");return c(),_(R,{class:"q-pa-md bg-white"},{default:t(()=>[l("div",mo,[a(L,null,{default:t(()=>[a(q,{icon:"home",to:{name:"home"}}),a(q,{label:"Portafolios",icon:"las la-cube"})]),_:1})]),l("div",uo,[l("div",fo,[go,l("div",_o,[a(b,{color:"indigo-6",icon:"las la-cube",onClick:r[0]||(r[0]=m=>o.showModal=!0),size:"md",rounded:"",label:"+"})])]),o.showTable?(c(),_(e,{key:0,onOnFire:o.onFire},null,8,["onOnFire"])):v("",!0),l("div",po,[a(N,{showing:o.loading,label:"Espere un momento...","label-class":"text-indigo-6","label-style":"font-size: 1.1em"},null,8,["showing"])])]),a(O,{modelValue:o.showModal,"onUpdate:modelValue":r[2]||(r[2]=m=>o.showModal=m)},{default:t(()=>[a(S,{class:"q-dialog-plugin"},{default:t(()=>[a(P,{class:"row"},{default:t(()=>[bo,l("div",ho,[a(b,{rounded:"",icon:"las la-times",size:"sm",onClick:r[1]||(r[1]=m=>o.showModal=!1),color:"indigo-6"})])]),_:1}),a(P,null,{default:t(()=>[a(d,{onOnFire:o.onFire},null,8,["onOnFire"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Mo=C(co,[["render",vo]]);export{Mo as default};
